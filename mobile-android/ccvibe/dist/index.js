"use strict";var f=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.prototype.hasOwnProperty;var A=(a,n)=>{for(var t in n)f(a,t,{get:n[t],enumerable:!0})},H=(a,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of S(n))!R.call(a,e)&&e!==t&&f(a,e,{get:()=>n[e],enumerable:!(i=$(n,e))||i.enumerable});return a};var M=a=>H(f({},"__esModule",{value:!0}),a);var N={};A(N,{default:()=>G});module.exports=M(N);var b=require("@vendetta/metro"),u=require("@vendetta/metro/common"),p=require("@vendetta/patcher"),C=require("@vendetta/plugin"),E=require("@vendetta/ui/toasts");var D=new Set(["mein","main","mei","mujhe","mera","meri","mere","humara","humari","humare","hum","ham","tum","tumhe","tumhara","tumhari","tumhare","aap","aapka","aapki","apka","apki","unka","unki","uska","uski","isko","usko","inhe","unhe","inka","yeh","ye","woh","wo","yehi","wohi","yahi","wahi","tera","teri","tere","kya","kaise","kaisa","kaisi","kyun","kyu","kiu","kiun","kab","kahan","kaun","kon","kitna","kitne","kitni","hai","hain","hun","tha","thi","hoga","hogi","hona","hoti","hota","honge","karo","karna","karta","karti","karke","karunga","kiya","kiye","karenge","karte","karega","karegi","bolo","bolna","bolta","bola","boli","bolte","bolti","batao","batana","bataya","batayi","batate","bata","jao","jana","jata","jati","gaya","gayi","jayega","jaate","jate","jaega","jaana","aao","aana","aata","aaya","aayi","aayega","aate","ate","ata","aati","aaty","dekho","dekhna","dekha","dekhi","dekhega","dekhte","dekh","suno","sunna","suna","suni","sunega","sunte","sun","chalo","chalna","chala","chali","chalega","chalte","chal","milo","milna","mila","mili","milega","milte","mil","milti","ruko","rukna","ruka","ruki","ruk","socho","sochna","socha","sochi","soch","sochte","samjho","samajhna","samjha","samjhi","samajh","samjhte","rehna","rehta","rehti","rahega","rahna","raha","rahi","rahe","rahte","banao","banna","bana","bani","banega","bante","khelo","khelna","khela","kheli","khel","khelte","padho","padhna","padha","padhi","padh","padhte","likho","likhna","likha","likhi","likh","likhte","dena","deta","deti","diya","diye","dega","degi","dete","lena","leta","leti","liya","liye","lega","legi","lete","sakta","sakti","sakte","chahiye","chahte","chahta","chahe","pata","maloom","malum","nahi","nahin","nai","mat","acha","accha","acchi","acche","theek","thik","sahi","galat","bahut","bohot","boht","zyada","jyada","thoda","thodi","thode","bada","badi","bade","bara","bari","bare","chota","choti","chote","naya","nayi","naye","purana","purani","purane","itna","itni","itne","itny","utna","utni","utne","ganda","gandi","gande","gandey","gandy","ajeeb","mazaak","mazak","abhi","phir","fir","baad","pehle","pahle","aaj","kal","parso","subah","dopahar","shaam","raat","yaar","yar","bhai","bhaiya","behen","behn","dost","beta","beti","bacha","jaan","jan","amma","abba","abbu","ammi","ghar","kamra","jagah","dukan","kaam","paisa","paise","cheez","cheezein","baat","baatein","khana","paani","chai","doodh","dimaag","dimaagh","dimag","dil","ankh","aankh","hath","haath","pair","duniya","zindagi","waqt","log","banda","bande","bandi","masla","mushkil","taklif","pareshani","dikkat","aur","lekin","magar","kyunki","kyuki","isliye","toh","bhi","wala","wali","wale","ka","ki","ke","ko","se","ne","par","pe","salam","namaste","namaskar","shukriya","dhanyavad","alvida","khudahafiz","haan","han","ji","bilkul","zaroor","shayad","bas","sirf","waise","aise","jaise","wese","ese","yahan","wahan","idhar","udhar","paas","andar","bahar","kuch","kuj","sab","sabhi","koi","har","hamesha"]),z=new Set(["tm","ap","nhi","ni","hy","hen","kro","kra","rha","rhi","rhe","kr","sy","mje","mjhe","karra","krra","krrha","krrahi","horra","horrha"]),I=new Set(["the","a","an","in","on","at","to","for","of","with","from","by","about","into","through","during","before","after","above","below","between","under","over","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","this","that","these","those","who","whom","whose","which","what","where","when","why","how","is","am","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","get","got","getting","make","made","making","go","going","went","gone","come","coming","came","see","saw","seen","seeing","know","knew","known","think","thought","thinking","want","wanted","wanting","take","took","taken","taking","give","gave","given","find","found","finding","tell","told","telling","say","said","saying","ask","asked","asking","use","used","using","try","tried","trying","need","needed","needing","feel","felt","feeling","become","became","becoming","leave","left","leaving","put","putting","mean","meant","meaning","keep","kept","keeping","let","begin","began","begun","seem","seemed","seeming","help","helped","helping","show","showed","shown","showing","hear","heard","play","played","playing","run","ran","running","move","moved","moving","live","lived","living","believe","believed","work","worked","working","proud","happy","sad","angry","excited","good","bad","new","old","great","big","small","little","long","short","high","low","young","right","wrong","best","better","worst","worse","same","different","just","also","very","really","actually","basically","now","then","here","there","always","never","often","still","already","yet","soon","again","ever","even","well","much","more","most","less","least","only","and","but","or","so","because","although","though","however","therefore","since","while","unless","until","if","whether","as","than","lol","lmao","omg","wtf","idk","btw","tbh","imo","fyi","brb","gtg","nvm","smh","ikr","rn","af","ngl","fr","lowkey","highkey","vibe","vibes","mood","flex","cap","sus","slay","bet","lit","fire","based","cringe","dude","bro","bruh","man","guys","fam","homie","gg","ayo","yo","yoo","damn","dang","wow","like","post","share","comment","follow","subscribe","video","photo","image","link","chat","message","dm","online","offline","website","app","account","profile"]);function L(a){let t=a.toLowerCase().trim().split(/\s+/).filter(d=>d.length>0),i=t.length;if(i===0)return{isHindiUrdu:!1,confidence:0,hindiWordCount:0,englishWordCount:0,totalWords:0,reason:"empty"};let e=0,o=0;for(let d of t){let c=d.replace(/[^a-z0-9]/g,"");c&&(D.has(c)||z.has(c)?e++:I.has(c)&&o++)}let s=!1,l=0,r="";return e===0?(s=!1,l=100,r="no Hindi/Urdu words found"):e>=2?(s=!0,l=Math.min(95,50+e*10),r=`${e} Hindi/Urdu words detected`):e===1&&o===0?(s=!0,l=60,r="1 Hindi word, no English"):e===1&&o<=1&&i<=4?(s=!0,l=55,r="Hindi word in short message"):(s=!1,l=80,r=`${o} English vs ${e} Hindi`),{isHindiUrdu:s,confidence:l,hindiWordCount:e,englishWordCount:o,totalWords:i,reason:r}}function v(a){if(a.length<3||/^https?:\/\//.test(a)||/^[\/!\.]\w+/.test(a)||/^```/.test(a)||/^<[@#]/.test(a))return!1;let n=L(a);return n.hindiWordCount>0&&console.log(`[CCVibe] Detection: "${a.substring(0,50)}${a.length>50?"...":""}" \u2192 ${n.isHindiUrdu?"HINDI":"ENGLISH"} (${n.confidence}% - ${n.reason})`),n.isHindiUrdu&&n.confidence>=50}var g=new Map,V=500;function T(){g.clear()}var k={bc:"sister f***er",mc:"mother f***er",bsdk:"born of a sister f***er",bhosdike:"born of a loose woman",bhosdi:"loose woman",madarchod:"mother f***er",behenchod:"sister f***er",chutiya:"idiot/fool",chutiye:"idiots/fools",gandu:"a**hole",gaand:"a**",lodu:"d**khead",lund:"d**k",chod:"f**k",chodna:"to f**k",randi:"prostitute",harami:"bastard",haramkhor:"illegitimate",kamina:"scoundrel",kameena:"scoundrel",kutte:"dog (insult)",kutta:"dog (insult)",suar:"pig (insult)",ullu:"owl (idiot)",gadha:"donkey (idiot)",bakwas:"nonsense",bewakoof:"stupid",pagal:"crazy",saala:"brother-in-law (insult)",saali:"sister-in-law (insult)",kya:"what",hai:"is",hain:"are",nahi:"no/not",haan:"yes",acha:"good/okay",accha:"good/okay",theek:"okay/fine",bahut:"very/much",bohot:"very/much",zyada:"more/too much",thoda:"a little",abhi:"now",baad:"after/later",pehle:"before/first",yaar:"friend/dude",bhai:"brother",behen:"sister",ni:"not",nhi:"no",koi:"someone",masla:"problem",toh:"so",karra:"doing",kara:"doing",krra:"doing","kar rha":"doing","kar raha":"doing","ho rha":"happening","ho raha":"happening","chal rha":"going on","chal raha":"going on","koi masla":"any problem","kya chal raha":"what's going on","kya ho raha":"what's happening","kaise ho":"how are you","theek hai":"okay/fine","accha hai":"it's good","bura hai":"it's bad","pata nahi":"don't know","samajh nahi":"don't understand","bol na":"say it","bata na":"tell me","sun be":"listen","dekh be":"look/see","chal be":"come on","haan bhai":"yes brother","nahi yaar":"no dude","kya baat hai":"what's the matter/wow","koi ni":"no problem","koi nahi":"no one/no problem"};async function W(a){try{let n=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(a)}`,t=await fetch(n);if(!t.ok)return console.log(`[CCVibe] Google Translate HTTP error: ${t.status}`),null;let i=await t.json();if(i&&i[0]&&Array.isArray(i[0])){let e=i[0].filter(o=>o&&Array.isArray(o)&&o[0]).map(o=>o[0]).join("");if(e&&_(a,e))return e}return null}catch(n){return console.error("[CCVibe] Google Translate error:",n),null}}function O(a){let n=a.toLowerCase().trim(),t=n.replace(/[?!.,]/g,"").trim();if(k[t])return k[t];let i=n,e=!1,o=Object.entries(k).filter(([r])=>r.includes(" ")).sort((r,d)=>d[0].length-r[0].length);for(let[r,d]of o)i.includes(r)&&(i=i.replace(new RegExp(r,"gi"),d),e=!0);let l=i.split(/\s+/).map(r=>{let d=r.replace(/[?!.,]/g,"").toLowerCase(),c=r.match(/[?!.,]+$/)?.[0]||"";return k[d]?(e=!0,k[d]+c):r});if(e){let r=l.join(" ");return console.log(`[CCVibe] Dictionary translating: "${a}" \u2192 "${r}"`),r}return null}function _(a,n){if(!n)return!1;let t=a.toLowerCase().replace(/[^a-z0-9]/g,""),i=n.toLowerCase().replace(/[^a-z0-9]/g,"");return t!==i}async function j(a){let n=g.get(a);if(n)return n;let t=(e,o)=>{let s={original:a,translated:e,sourceLanguage:o};if(g.size>=V){let l=g.keys().next().value;l&&g.delete(l)}return g.set(a,s),s},i=Date.now();try{let e=await W(a);if(e)return console.log(`[CCVibe] Google (${Date.now()-i}ms): "${a}" \u2192 "${e}"`),t(e,"google");let o=O(a);return o?(console.log(`[CCVibe] Dictionary (${Date.now()-i}ms): "${a}" \u2192 "${o}"`),t(o,"dictionary")):(console.log(`[CCVibe] No translation found for: "${a}"`),{original:a,translated:a,sourceLanguage:"unchanged"})}catch(e){return console.error("[CCVibe] Translation error:",e),{original:a,translated:a,sourceLanguage:"error"}}}var m=[],w=new Map;function h(a){try{(0,E.showToast)?.(a,{duration:2e3})}catch{}console.log("[CCVibe]",a)}async function y(a){if(!a?.content||typeof a.content!="string"||a.content.length<3||!v(a.content))return;let n=a.content;h(`Detected: ${n.substring(0,30)}...`);let t=w.get(n);if(t){a.content=t;return}try{let i=await j(n);if(i.translated!==i.original){let e=C.storage.showOriginalOnTap?`${i.translated} [${n}]`:i.translated;w.set(n,e),a.content=e,h("Translated!")}}catch(i){h(`Error: ${i}`)}}var G={onLoad:()=>{var n;h("CCVibe loading..."),(n=C.storage).showOriginalOnTap??(n.showOriginalOnTap=!0);let a=0;try{if(u.FluxDispatcher&&typeof u.FluxDispatcher.dispatch=="function"){let t=(0,p.before)("dispatch",u.FluxDispatcher,i=>{let e=i[0];return e?.type==="MESSAGE_CREATE"&&e?.message&&y(e.message),i});m.push(t),a++,h("Hooked FluxDispatcher")}}catch(t){h(`FluxDispatcher failed: ${t}`)}try{if(u.FluxDispatcher?.subscribe){let t=i=>{i?.message&&y(i.message)};u.FluxDispatcher.subscribe("MESSAGE_CREATE",t),m.push(()=>u.FluxDispatcher.unsubscribe("MESSAGE_CREATE",t)),a++,h("Subscribed MESSAGE_CREATE")}}catch(t){h(`Subscribe failed: ${t}`)}try{let t=(0,b.findByProps)("sendMessage","receiveMessage");if(t?.receiveMessage){let i=(0,p.before)("receiveMessage",t,e=>{let o=e[0],s=e[1];return s?.message&&y(s.message),e});m.push(i),a++,h("Hooked receiveMessage")}}catch{}try{(0,b.findByStoreName)("MessageStore")&&h("Found MessageStore")}catch{}h(`CCVibe loaded! (${a} hooks)`)},onUnload:()=>{h("CCVibe unloading...");for(let a of m)try{a()}catch{}m.length=0,w.clear(),T(),h("CCVibe unloaded!")}};
