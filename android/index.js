"use strict";var f=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var L=(a,n)=>{for(var e in n)f(a,e,{get:n[e],enumerable:!0})},O=(a,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of M(n))!V.call(a,i)&&i!==e&&f(a,i,{get:()=>n[i],enumerable:!(o=H(n,i))||o.enumerable});return a};var z=a=>O(f({},"__esModule",{value:!0}),a);var G={};L(G,{default:()=>_});module.exports=z(G);var p=require("@vendetta/metro"),b=require("@vendetta/patcher"),w=require("@vendetta/plugin");var S=new Set(["mein","main","mei","mujhe","mera","meri","mere","humara","humari","humare","hum","ham","tum","tumhe","tumhara","tumhari","tumhare","aap","aapka","aapki","apka","apki","unka","unki","uska","uski","isko","usko","inhe","unhe","inka","yeh","ye","woh","wo","yehi","wohi","yahi","wahi","tera","teri","tere","kya","kaise","kaisa","kaisi","kyun","kyu","kiu","kiun","kab","kahan","kaun","kon","kitna","kitne","kitni","hai","hain","hun","tha","thi","hoga","hogi","hona","hoti","hota","honge","karo","karna","karta","karti","karke","karunga","kiya","kiye","karenge","karte","karega","karegi","bolo","bolna","bolta","bola","boli","bolte","bolti","batao","batana","bataya","batayi","batate","bata","jao","jana","jata","jati","gaya","gayi","jayega","jaate","jate","jaega","jaana","aao","aana","aata","aaya","aayi","aayega","aate","ate","ata","aati","aaty","dekho","dekhna","dekha","dekhi","dekhega","dekhte","dekh","suno","sunna","suna","suni","sunega","sunte","sun","chalo","chalna","chala","chali","chalega","chalte","chal","milo","milna","mila","mili","milega","milte","mil","milti","ruko","rukna","ruka","ruki","ruk","socho","sochna","socha","sochi","soch","sochte","samjho","samajhna","samjha","samjhi","samajh","samjhte","rehna","rehta","rehti","rahega","rahna","raha","rahi","rahe","rahte","banao","banna","bana","bani","banega","bante","khelo","khelna","khela","kheli","khel","khelte","padho","padhna","padha","padhi","padh","padhte","likho","likhna","likha","likhi","likh","likhte","dena","deta","deti","diya","diye","dega","degi","dete","lena","leta","leti","liya","liye","lega","legi","lete","sakta","sakti","sakte","chahiye","chahte","chahta","chahe","pata","maloom","malum","nahi","nahin","nai","mat","acha","accha","acchi","acche","theek","thik","sahi","galat","bahut","bohot","boht","zyada","jyada","thoda","thodi","thode","bada","badi","bade","bara","bari","bare","chota","choti","chote","naya","nayi","naye","purana","purani","purane","itna","itni","itne","itny","utna","utni","utne","ganda","gandi","gande","gandey","gandy","ajeeb","mazaak","mazak","abhi","phir","fir","baad","pehle","pahle","aaj","kal","parso","subah","dopahar","shaam","raat","yaar","yar","bhai","bhaiya","behen","behn","dost","beta","beti","bacha","jaan","jan","amma","abba","abbu","ammi","ghar","kamra","jagah","dukan","kaam","paisa","paise","cheez","cheezein","baat","baatein","khana","paani","chai","doodh","dimaag","dimaagh","dimag","dil","ankh","aankh","hath","haath","pair","duniya","zindagi","waqt","log","banda","bande","bandi","masla","mushkil","taklif","pareshani","dikkat","aur","lekin","magar","kyunki","kyuki","isliye","toh","bhi","wala","wali","wale","ka","ki","ke","ko","se","ne","par","pe","salam","namaste","namaskar","shukriya","dhanyavad","alvida","khudahafiz","haan","han","ji","bilkul","zaroor","shayad","bas","sirf","waise","aise","jaise","wese","ese","yahan","wahan","idhar","udhar","paas","andar","bahar","kuch","kuj","sab","sabhi","koi","har","hamesha"]),D=new Set(["tm","ap","nhi","ni","hy","hen","kro","kra","rha","rhi","rhe","kr","sy","mje","mjhe","karra","krra","krrha","krrahi","horra","horrha"]),I=new Set(["the","a","an","in","on","at","to","for","of","with","from","by","about","into","through","during","before","after","above","below","between","under","over","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","this","that","these","those","who","whom","whose","which","what","where","when","why","how","is","am","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","get","got","getting","make","made","making","go","going","went","gone","come","coming","came","see","saw","seen","seeing","know","knew","known","think","thought","thinking","want","wanted","wanting","take","took","taken","taking","give","gave","given","find","found","finding","tell","told","telling","say","said","saying","ask","asked","asking","use","used","using","try","tried","trying","need","needed","needing","feel","felt","feeling","become","became","becoming","leave","left","leaving","put","putting","mean","meant","meaning","keep","kept","keeping","let","begin","began","begun","seem","seemed","seeming","help","helped","helping","show","showed","shown","showing","hear","heard","play","played","playing","run","ran","running","move","moved","moving","live","lived","living","believe","believed","work","worked","working","proud","happy","sad","angry","excited","good","bad","new","old","great","big","small","little","long","short","high","low","young","right","wrong","best","better","worst","worse","same","different","just","also","very","really","actually","basically","now","then","here","there","always","never","often","still","already","yet","soon","again","ever","even","well","much","more","most","less","least","only","and","but","or","so","because","although","though","however","therefore","since","while","unless","until","if","whether","as","than","lol","lmao","omg","wtf","idk","btw","tbh","imo","fyi","brb","gtg","nvm","smh","ikr","rn","af","ngl","fr","lowkey","highkey","vibe","vibes","mood","flex","cap","sus","slay","bet","lit","fire","based","cringe","dude","bro","bruh","man","guys","fam","homie","gg","ayo","yo","yoo","damn","dang","wow","like","post","share","comment","follow","subscribe","video","photo","image","link","chat","message","dm","online","offline","website","app","account","profile"]);function W(a){let e=a.toLowerCase().trim().split(/\s+/).filter(l=>l.length>0),o=e.length;if(o===0)return{isHindiUrdu:!1,confidence:0,hindiWordCount:0,englishWordCount:0,totalWords:0,reason:"empty"};let i=0,r=0;for(let l of e){let d=l.replace(/[^a-z0-9]/g,"");d&&(S.has(d)||D.has(d)?i++:I.has(d)&&r++)}let h=!1,s=0,t="";return i===0?(h=!1,s=100,t="no Hindi/Urdu words found"):i>=2?(h=!0,s=Math.min(95,50+i*10),t=`${i} Hindi/Urdu words detected`):i===1&&r===0?(h=!0,s=60,t="1 Hindi word, no English"):i===1&&r<=1&&o<=4?(h=!0,s=55,t="Hindi word in short message"):(h=!1,s=80,t=`${r} English vs ${i} Hindi`),{isHindiUrdu:h,confidence:s,hindiWordCount:i,englishWordCount:r,totalWords:o,reason:t}}function y(a){if(a.length<3||/^https?:\/\//.test(a)||/^[\/!\.]\w+/.test(a)||/^```/.test(a)||/^<[@#]/.test(a))return!1;let n=W(a);return n.hindiWordCount>0&&console.log(`[CCVibe] Detection: "${a.substring(0,50)}${a.length>50?"...":""}" \u2192 ${n.isHindiUrdu?"HINDI":"ENGLISH"} (${n.confidence}% - ${n.reason})`),n.isHindiUrdu&&n.confidence>=50}var u=new Map,E=500;function C(){u.clear()}var g={bc:"sister f***er",mc:"mother f***er",bsdk:"born of a sister f***er",bhosdike:"born of a loose woman",bhosdi:"loose woman",madarchod:"mother f***er",behenchod:"sister f***er",chutiya:"idiot/fool",chutiye:"idiots/fools",gandu:"a**hole",gaand:"a**",lodu:"d**khead",lund:"d**k",chod:"f**k",chodna:"to f**k",randi:"prostitute",harami:"bastard",haramkhor:"illegitimate",kamina:"scoundrel",kameena:"scoundrel",kutte:"dog (insult)",kutta:"dog (insult)",suar:"pig (insult)",ullu:"owl (idiot)",gadha:"donkey (idiot)",bakwas:"nonsense",bewakoof:"stupid",pagal:"crazy",saala:"brother-in-law (insult)",saali:"sister-in-law (insult)",kya:"what",hai:"is",hain:"are",nahi:"no/not",haan:"yes",acha:"good/okay",accha:"good/okay",theek:"okay/fine",bahut:"very/much",bohot:"very/much",zyada:"more/too much",thoda:"a little",abhi:"now",baad:"after/later",pehle:"before/first",yaar:"friend/dude",bhai:"brother",behen:"sister",ni:"not",nhi:"no",koi:"someone",masla:"problem",toh:"so",karra:"doing",kara:"doing",krra:"doing","kar rha":"doing","kar raha":"doing","ho rha":"happening","ho raha":"happening","chal rha":"going on","chal raha":"going on","koi masla":"any problem","kya chal raha":"what's going on","kya ho raha":"what's happening","kaise ho":"how are you","theek hai":"okay/fine","accha hai":"it's good","bura hai":"it's bad","pata nahi":"don't know","samajh nahi":"don't understand","bol na":"say it","bata na":"tell me","sun be":"listen","dekh be":"look/see","chal be":"come on","haan bhai":"yes brother","nahi yaar":"no dude","kya baat hai":"what's the matter/wow","koi ni":"no problem","koi nahi":"no one/no problem"};async function A(a){try{let n=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(a)}`,e=await fetch(n);if(!e.ok)return console.log(`[CCVibe] Google Translate HTTP error: ${e.status}`),null;let o=await e.json();if(o&&o[0]&&Array.isArray(o[0])){let i=o[0].filter(r=>r&&Array.isArray(r)&&r[0]).map(r=>r[0]).join("");if(i&&N(a,i))return i}return null}catch(n){return console.error("[CCVibe] Google Translate error:",n),null}}function U(a){let n=a.toLowerCase().trim(),e=n.replace(/[?!.,]/g,"").trim();if(g[e])return g[e];let o=n,i=!1,r=Object.entries(g).filter(([t])=>t.includes(" ")).sort((t,l)=>l[0].length-t[0].length);for(let[t,l]of r)o.includes(t)&&(o=o.replace(new RegExp(t,"gi"),l),i=!0);let s=o.split(/\s+/).map(t=>{let l=t.replace(/[?!.,]/g,"").toLowerCase(),d=t.match(/[?!.,]+$/)?.[0]||"";return g[l]?(i=!0,g[l]+d):t});if(i){let t=s.join(" ");return console.log(`[CCVibe] Dictionary translating: "${a}" \u2192 "${t}"`),t}return null}function N(a,n){if(!n)return!1;let e=a.toLowerCase().replace(/[^a-z0-9]/g,""),o=n.toLowerCase().replace(/[^a-z0-9]/g,"");return e!==o}async function v(a){let n=u.get(a);if(n)return n;let e=(i,r)=>{let h={original:a,translated:i,sourceLanguage:r};if(u.size>=E){let s=u.keys().next().value;s&&u.delete(s)}return u.set(a,h),h},o=Date.now();try{let i=await A(a);if(i)return console.log(`[CCVibe] Google (${Date.now()-o}ms): "${a}" \u2192 "${i}"`),e(i,"google");let r=U(a);return r?(console.log(`[CCVibe] Dictionary (${Date.now()-o}ms): "${a}" \u2192 "${r}"`),e(r,"dictionary")):(console.log(`[CCVibe] No translation found for: "${a}"`),{original:a,translated:a,sourceLanguage:"unchanged"})}catch(i){return console.error("[CCVibe] Translation error:",i),{original:a,translated:a,sourceLanguage:"error"}}}var j=(0,p.findByProps)("getMessage","getMessages"),T=(0,p.findByProps)("receiveMessage"),k=[],m=new Map,c=new Set,R;(R=w.storage).showOriginalOnTap??(R.showOriginalOnTap=!0);async function $(a){if(!a||a.length<3||!y(a))return a;let n=m.get(a);if(n)return n;if(c.has(a))return a;c.add(a);try{let e=await v(a);if(c.delete(a),e.translated!==e.original)return m.set(a,e.translated),w.storage.showOriginalOnTap?`${e.translated} [${a}]`:e.translated}catch(e){console.error("[CCVibe] Translation error:",e),c.delete(a)}return a}var _={onLoad:()=>{if(console.log("[CCVibe] Loading plugin..."),T?.receiveMessage){let a=(0,b.before)("receiveMessage",T,async n=>{try{let e=n[0];if(e?.content&&typeof e.content=="string"){let o=await $(e.content);o!==e.content&&(e.content=o)}}catch(e){console.error("[CCVibe] Error in receiveMessage patch:",e)}return n});k.push(a)}if(j?.getMessage){let a=(0,b.after)("getMessage",j,(n,e)=>{if(!e?.content||typeof e.content!="string")return e;try{let o=m.get(e.content);if(o)return{...e,content:o};y(e.content)&&$(e.content)}catch(o){console.error("[CCVibe] Error in getMessage patch:",o)}return e});k.push(a)}console.log("[CCVibe] Plugin loaded successfully!")},onUnload:()=>{console.log("[CCVibe] Unloading plugin...");for(let a of k)try{a()}catch(n){console.error("[CCVibe] Error removing patch:",n)}k.length=0,m.clear(),c.clear(),C(),console.log("[CCVibe] Plugin unloaded!")},settings:{showOriginalOnTap:{type:"toggle",label:"Show Original on Tap",description:"Show original text in brackets after translation",default:!0}}};
